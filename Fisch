--// Auto Scylla Hunt Script with GUI //--
-- Made By Jeab

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")

local LocalPlayer = Players.LocalPlayer

-- ชื่อไอเท็ม
local sundialName = "Sundial Totem"
local auroraName = "Aurora Totem"
local rodName = "Blessed Rod Of The Zenith"

-- สถานะการทำงาน
local isRunning = false
local scyllaActive = false

-- ใช้ไอเท็มตามชื่อ
local function useItem(itemName)
    for i, v in ipairs(LocalPlayer.Backpack:GetChildren()) do
        if v.Name == itemName then
            LocalPlayer.Character.Humanoid:EquipTool(v)
            task.wait(0.1)
            VirtualInputManager:SendKeyEvent(true, "E", false, game)
            task.wait(0.1)
            VirtualInputManager:SendKeyEvent(false, "E", false, game)
            break
        end
    end
end

-- loop หลัก
local function mainLoop()
    task.spawn(function()
        while true do
            if isRunning then
                if not scyllaActive then
                    -- ใช้ Sundial ต่อเนื่อง
                    useItem(sundialName)
                else
                    -- Scylla เกิด → ใช้ Aurora Totem 1 ครั้ง
                    useItem(auroraName)
                    task.wait(1)
                    -- จากนั้นเปลี่ยนไปถือคันเบ็ด
                    useItem(rodName)
                    -- รอจนกว่า Scylla หายไป
                    repeat task.wait() until not isRunning or not scyllaActive
                end
            end
            task.wait(0.5)
        end
    end)
end

-- Detect system chat
local chatEvent = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("OnMessageDoneFiltering")
chatEvent.OnClientEvent:Connect(function(data)
    local msg = data.Message or ""
    if string.find(msg, "Scylla Hunt has begun!") then
        scyllaActive = true
    elseif string.find(msg, "The Scylla got away") then
        scyllaActive = false
    elseif string.find(msg, "has caught the Scylla!") then
        scyllaActive = false
    end
end)

-- เริ่ม loop
mainLoop()

--// GUI //--
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local ToggleButton = Instance.new("TextButton")
local StopButton = Instance.new("TextButton")
local Credit = Instance.new("TextLabel")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.Position = UDim2.new(0.3, 0, 0.3, 0)
Frame.Size = UDim2.new(0, 200, 0, 120)
Frame.Active = true
Frame.Draggable = true

UICorner.Parent = Frame

ToggleButton.Parent = Frame
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
ToggleButton.Size = UDim2.new(0, 160, 0, 40)
ToggleButton.Position = UDim2.new(0.5, -80, 0.2, 0)
ToggleButton.Text = "เปิดการทำงาน"
ToggleButton.TextColor3 = Color3.fromRGB(255,255,255)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18

StopButton.Parent = Frame
StopButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
StopButton.Size = UDim2.new(0, 160, 0, 30)
StopButton.Position = UDim2.new(0.5, -80, 0.55, 0)
StopButton.Text = "ปิดสคริปต์"
StopButton.TextColor3 = Color3.fromRGB(255,255,255)
StopButton.Font = Enum.Font.SourceSansBold
StopButton.TextSize = 16

Credit.Parent = Frame
Credit.BackgroundTransparency = 1
Credit.Size = UDim2.new(1, 0, 0.2, 0)
Credit.Position = UDim2.new(0, 0, 0.8, 0)
Credit.Text = "Made By Jeab"
Credit.TextColor3 = Color3.fromRGB(255,255,255)
Credit.Font = Enum.Font.SourceSansItalic
Credit.TextSize = 14

-- ปุ่มสลับทำงาน
ToggleButton.MouseButton1Click:Connect(function()
    isRunning = not isRunning
    if isRunning then
        ToggleButton.Text = "ปิดการทำงาน"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(170,0,0)
    else
        ToggleButton.Text = "เปิดการทำงาน"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0,170,0)
    end
end)

-- ปุ่มปิดสคริปต์
StopButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    isRunning = false
    scyllaActive = false
end)
