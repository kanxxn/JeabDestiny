-- ðŸŸ¢ Auto Appraise Until Target Mutation (Hotbar Slot 9)
local TARGET_MUTATION = "Golden"  -- <<< à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸£à¸‡à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ mutation à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
local HOTBAR_SLOT = 9            -- <<< à¸•à¹‰à¸­à¸‡à¸–à¸·à¸­à¸›à¸¥à¸²à¹„à¸§à¹‰à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡à¸™à¸µà¹‰

local player = game.Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")
local UIS = game:GetService("UserInputService")

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸«à¸²à¸›à¸¸à¹ˆà¸¡
local function findButton(text)
    for _, gui in ipairs(PlayerGui:GetDescendants()) do
        if gui:IsA("TextButton") or gui:IsA("ImageButton") then
            if string.find(string.lower(gui.Text), string.lower(text)) then
                return gui
            end
        end
    end
    return nil
end

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸”à¸›à¸¸à¹ˆà¸¡
local function clickButton(btn)
    if btn then
        task.wait(0.2)
        firesignal(btn.MouseButton1Click)
        print("âœ… Click:", btn.Text)
        return true
    end
    return false
end

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸›à¸–à¸·à¸­à¹„à¸­à¹€à¸—à¹‡à¸¡à¸—à¸µà¹ˆà¸Šà¹ˆà¸­à¸‡ 9
local function equipSlot(slot)
    local hotkey = Enum.KeyCode["One"].Value + (slot - 1) -- One=49, Two=50...
    local key = Enum.KeyCode[({ "One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Zero" })[slot]]
    if key then
        UIS.InputBegan:Fire(key, false) -- à¸ˆà¸³à¸¥à¸­à¸‡à¸à¸”à¸›à¸¸à¹ˆà¸¡à¹€à¸¥à¸‚
    end
end

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸«à¸¥à¸±à¸
local function autoAppraise()
    task.spawn(function()
        local firstYes = true
        while true do
            task.wait(0.6)

            -- à¸•à¸£à¸§à¸ˆà¸§à¹ˆà¸²à¸–à¸·à¸­à¸›à¸¥à¸²à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡ 9 à¹„à¸§à¹‰à¸£à¸¶à¸¢à¸±à¸‡
            equipSlot(HOTBAR_SLOT)

            -- à¸£à¸­à¸šà¹à¸£à¸à¸•à¹‰à¸­à¸‡à¸à¸” Yes à¸”à¹‰à¸§à¸¢
            if firstYes then
                local appraiseBtn = findButton("Can you appraise this fish?")
                if appraiseBtn then
                    clickButton(appraiseBtn)
                    task.wait(0.5)
                end

                local yesBtn = findButton("Yes")
                if yesBtn then
                    clickButton(yesBtn)
                    firstYes = false -- à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸à¸” Yes à¹à¸¥à¹‰à¸§
                    task.wait(1.5)
                end
            else
                -- à¸£à¸­à¸šà¸–à¸±à¸”à¹„à¸›à¸à¸”à¹à¸•à¹ˆ "Can you appraise this fish?" à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸”à¸µà¸¢à¸§
                local appraiseBtn = findButton("Can you appraise this fish?")
                if appraiseBtn then
                    clickButton(appraiseBtn)
                    task.wait(1.5)
                end
            end

            -- à¸•à¸£à¸§à¸ˆà¸§à¹ˆà¸²à¹€à¸ˆà¸­ mutation à¸•à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
            for _, gui in ipairs(PlayerGui:GetDescendants()) do
                if gui:IsA("TextLabel") and string.find(string.lower(gui.Text), string.lower(TARGET_MUTATION)) then
                    print("ðŸŽ‰ à¹€à¸ˆà¸­ Mutation:", TARGET_MUTATION)
                    return -- à¸«à¸¢à¸¸à¸” loop
                end
            end
        end
    end)
end

-- à¹€à¸£à¸´à¹ˆà¸¡à¸—à¸³à¸‡à¸²à¸™à¸­à¸­à¹‚à¸•à¹‰à¹€à¸¡à¸·à¹ˆà¸­ UI à¸ªà¸™à¸—à¸™à¸²à¹€à¸”à¹‰à¸‡à¸‚à¸¶à¹‰à¸™
PlayerGui.ChildAdded:Connect(function(child)
    task.wait(0.3)
    if string.find(string.lower(child.Name), "dialogue") or string.find(string.lower(child.Name), "options") then
        print("ðŸ“Œ à¹€à¸£à¸´à¹ˆà¸¡à¸„à¸¸à¸¢à¸à¸±à¸š NPC â†’ Auto Appraise")
        autoAppraise()
    end
end)
